---
layout:     post 
slug:      "what-is-cargo-in-rust"
title:      "什么是cargo"
subtitle:   ""
description: ""
date:       2022-02-03
author:     "梁远鹏"
image: "[img/post-bg-2015.jpg](https://res.cloudinary.com/lyp/image/upload/v1581729516/hugo/blog.github.io/avian-beak-bird-blur-416117.jpg)"
published: true
tags:
    - rust 
categories: [ TECH ]
---

# 介绍  

Cargo是Rust世界中的构建工具和包管理工具,大部分语言你都可以找到对应的包管理工具,例如Java中的Maven/Gradle,Node中的npm,Golang中的mod,Python中的pip.目前来说,大多数的Rust项目都会选择Cargo来管理项目,因为它确实可以帮助你做很多事情.  

相比其他语言,`Cargo`更妙的地方是它可以在你更新`rust`版本的时候同步更新`Cargo`的版本,你只需要一个`rustup update`命令就可以完成rust语言和Cargo工具的版本更新,简直不要太舒服.  

# 新建一个cargo项目  

Rust中主要分为bin和lib两种项目,cargo默认创建的是bin类型的项目.

```shell
$ cargo new hello
     Created binary (application) `hello` package
```  

这就创建了一个`二进制`的cargo项目,而如果需要新建一个`包`项目,需要添加参数`--lib`: 

```shell
$ cargo new hello --lib
     Created library `hello` package
```  

可以看到两者之间提示是不一样的,可以看看生成了什么文件:  


```shell
$ cd hello && tree .
.
├── .git
│   ├── HEAD
│   ├── config
│   ├── description
│   ├── hooks
│   │   └── README.sample
│   ├── info
│   │   └── exclude
│   ├── objects
│   │   ├── info
│   │   └── pack
│   └── refs
│       ├── heads
│       └── tags
├── .gitignore
├── Cargo.lock
├── Cargo.toml
└── src
    └── lib.rs

1 directory, 2 files
```  

内容很简单,只有一个`Cargo.toml`配置文件以及一个`lib.rs`(如果是二进制类型项目,那么生成的是main.rs).  

Cargo贴心小棉袄还帮忙创建了一个`.gitignore`文件,简直是懒人福音.

lib.rs文件的内容很简单:   
```rust
#[cfg(test)]
mod tests {
    #[test]
    fn it_works() {
        let result = 2 + 2;
        assert_eq!(result, 4);
    }
}
```  

lib类型的项目是无法直接`cargo run`的,如果是bin类型的项目,那么你可以试试`cargo run`,然后你会看到熟悉的`hello world`的日志打印  

这里我们试试`cargo build`:   

```rust
$ cargo build
   Compiling hello v0.1.0 (/Users/lanren/Documents/repositorys/git/tmp/hello)
    Finished dev [unoptimized + debuginfo] target(s) in 0.93s
```  

由于我们这里创建的是`lib`项目,因此build之后不会有二进制文件产生,`lib`项目更多的是跑测试单元,编译代码等等.  

# Cargo.toml有什么内容  

接下来看看`Cargo.toml`都有什么内容,  


```toml
[package]
name = "bookkeeper-rs"
version = "0.1.0"
edition = "2018"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
```  

默认情况下会生成很简单的三行内容,`name`表示你这个项目的名称,当你将你的项目发布到cates.io时就会使用这个名称,`version`默认为`0.1.0`,如果你觉得不适合可以更改为你想要的内容,`edition`表示Rust语言的大版本,如果你当前你的语言是最新的,那么`edition`会显示为`2021`,因为Rust社区三年推一个大版本呢.  

这就是最简单的内容

# 发布自定义的cate  

与Cargo对应的包管理系统网站是crates.io,这是一个rust世界中公用的包管理网站,当你需要公开发布你自己的包时,基本上你就需要用到这个网站.  

如果你需要公开发布你的项目,那么你还需要填写一些其他字段,例如:   

1. license,表明你项目所使用的的开源协议
2. description,简单描述你项目的作用  
3. repository,项目源代码的地址   
4. readme,REAMD文件所在源码地址的文件.

# 注意

本文还在持续创作中
